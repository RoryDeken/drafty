<html>
  <head>
    <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
  </head>
  <body>
    <div id="app">
      <ul>
      <li v-for="player in players" v-show="!player.drafted">
        <button @click="add(player)">
      {{ player.firstName }}   {{ player.lastName }} |    {{ player.team }}  | {{ player.position }} | {{ player.id }}
    </button>
    </a>
    </li>
    </ul>
  
  
    </div>
    <script type="text/javascript">
      new Vue({ el: '#app', data() { 
        return { players: null } }, 
        mounted() {
    // GET request using fetch with error handling
    this.players = ""
    fetch("http://localhost:5000")
      .then(async response => {
        const data = await response.json();
    
        // check for error response
        if (!response.ok) {
          // get error message from body or default to response statusText
          const error = (data && data.message) || response.statusText;
          return Promise.reject(error);
        }
        data.forEach((item, i) => {
          item.drafted = false
        });
        this.players = data
      })
      .catch(error => {
        this.errorMessage = error;
        console.error("There was an error!", error);
      });
  },
  methods: {
    
    add: function(player){
      player.drafted = true
      fetch('http://localhost:5000/select/', {
    method: 'post',
    body: JSON.stringify(player.id)
  }).then(response => response.text())
  .then(data => console.log(data));
    }
  }
})
    </script>
  </body>
</html>